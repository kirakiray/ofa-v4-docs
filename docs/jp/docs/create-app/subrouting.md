# サブルーティングモード

在 ofa.js 中，设置子路由与一些前端框架的做法略有不同。ofa.js 使用一种更加直观的方式，通过在页面模块上设置父页面来作为容器，从而实现子路由的需求。

## 親ページのコンテナを設定します

サブルートを作成するためには、まず子ページのページモジュールに `parent` パラメータを設定する必要があります。これにより、子ページが読み込まれると、ofa.js が自動で子ページを親ペー���のコンテナで包みます。

```html
<template page>
  <h1>Page 1</h1>

  <script>
    export const parent = "./layout-page.html";
  </script>
</template>
```

上記の例では、サブページのページモジュールは `parent` パラメーターを使用して親ページコンテナのアドレスを指定しています。

父ページコンテナーテンプレートの設定

父页面容器的模板需要设置一个 `<slot>` 元素，以便子页面能够插入到父页面的指定位置。同时，确保 `<slot>` 元素的容器元素设置为 `position: relative`，这是非常重要的，因为子页面会在父页面容器中绝对定位。

以下是一个父页面容器的示例模板：

```html
<!-- layout-page.html -->
<template page>
  <style>
    /* 设置容器元素为 relative 定位 */
    .parent-container {
      position: relative;
    }
  </style>
  
  <!-- 设置容器元素，用于插入子页面 -->
  <div class="parent-container">
    <slot></slot>
  </div>
</template>
```

上記の例では、`slot` を持つコンテナ要素を設定することで、サブページがそのコンテナに挿入されます。コンテナ要素が相対的な位置にあることを確認してください。これにより、サブページはコンテナに基づいて配置されます。

通过使用这种方式，你可以更直观地配置子路由，通过设置父页面容器和子页面的关联，来实现子页面的加载和渲染。

父ページのルートリスナー

一部の場合では、複数のページが同じ親ページをコンテナとして共有し、これらのページ間で移動すると親ページは更新されません。この場合、親ページはまだルートの変更を監視でき、ページをリフレッシュせずに適切な操作を実行できます。

### ルートの変更を監視する

親ページのモジュールでは、`routerChange`関数を設定することができます。これはルートの変更を監視するために使用されます。ページがルートを変更して親ページをリフレッ���ュしない場合、`routerChange`イベントがトリガーされます。このイベントは現在のページの情報とジャンプの方法（`type`）が渡されます。

以下は、親ページモジュールの例であり、`routerChange` 関数を設定してルートの変更を監視する方法を示しています。

```javascript
// 親ページのページモジュール
export const routerChange = (current, type) => {
  console.log(`ルータの変更：現在のページは ${current.src}、変更方法は ${type}です`);
};
```

上記の例では、`routerChange`関数は2つのパラメータ、`current`は現在のページのアドレスを、`type`は遷移方法を表します。ページのルーティングが変更された場合、この関数がトリガーされ、関連する情報が出力されます。