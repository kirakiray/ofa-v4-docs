# 组件的生命周期

ofa.jsにおいて、コンポーネントのライフサイクルは特定のタイミングでトリガされるフック関数です。これらのフック関数を使用することで、より細かい制御と相互作用が��能となります。ofa.jsには、`created`、`ready`、`watch`、`loaded`、`attached`、および`detached`の5つの重要なライフサイクルフックがあり、それぞれ異なるタイミングでトリガされます。

## ライフサイクルフック

### created

`created` 生命周期钩子在组件创建时被触发。在此阶段，组件的数据尚未被初始化，模板内容也未被渲染。你可以在这个阶段执行一些初始化操作，或者准备在后续阶段使用的数据。

### ready

readyのライフサイクルフックは、コンポーネントのデータとテンプレートが初期化された後にトリガされ、コンポーネントが準備完了したことを示します。この段階では、コンポーネントのデータにアクセスでき、テンプレートがすでにレンダリングされているため、インタラクティブな操作を実行することができます。

もしコンポーネントのテンプレートが他のコンポーネントに依存している場合、この段階では依存関係の読み込みを待ちません。そのため、この段階ではコンポーネントにローディングスタイルを追加するのに適していますが、依存関係の読み込みが完了してから関連する操作を実行する必要があります。

### watch

`ready`ステージが完了すると、関連する`watch`オブジェクトのリスナー関数が1回呼び出されます。その後、データのどの値が変更されると、対応するキーのリスナー関数が再度呼び出されます。

### loaded

`loaded` ライフサイクルフックは、コンポーネントのテンプレート内のすべての依存関係がロードされた後にトリガーされます。この段階では、コンポーネントをレンダリングする前に、すべての依存関係がすでにロードされていることを確認します。この時点では、`ready` 階段で追加されたローディングスタイルを取り除くのに適しています。

### attached

`attached` ライフサイクルフックは、コンポーネントがドキュメントに追加された時に発生します。この段階では、コンポーネント内の要素のサイズに関連する情報を取得し、���ータバインディングやグローバルイベントの操作が適しています。

### detached

`detached` 生命周期钩子会在组件从文档中移除时触发。在这个阶段，你可以执行一些清理操作，比如取消事件监听或者释放资源，以防止内存泄漏。

例示演示

以下は、これらのライフサイクルフックを使用する方法の例です：

```javascript
export default {
  data: {
    count: 0,
  },
  watch: {
    count(count) {
      console.log("count: ", count);
    },
  },
  created() {
    console.log("created: Component created, data not initialized.");
  },
  ready() {
    console.log(
      "ready: Component is ready with initialized data and template."
    );

    this.on("click", () => {
      this.count++;
    });
  },
  attached() {
    console.log("attached: Component attached to DOM.");
  },
  detached() {
    console.log("detached: Component detached from DOM.");
  },
};
```

## ライフサイクルフローチャート
<img src="../../../publics/life-cycle.png" width="512" />
