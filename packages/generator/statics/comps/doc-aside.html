<template component>
  <d-nav>
    <x-fill name="dItem" :value="leftNavs"></x-fill>
  </d-nav>
  <template name="dItem">
    <d-item attr:active="$host.leftGetActive($data)">
      <x-if :value="$data.href">
        <a attr:href="$data.href" olink on:click="$ele.refresh()"
          >{{$data.name}}</a
        >
      </x-if>
      <x-else>
        <span> {{$data.name}}</span>
        <d-nav slot="nav">
          <x-fill :value="$data.childs" name="dItem"></x-fill>
        </d-nav>
      </x-else>
    </d-item>
  </template>

  <script>
    import { leftNavsData } from "../data.mjs";

    export default {
      data: {
        leftNavs: [],
        activeHref: "",
      },
      proto: {
        leftGetActive(data) {
          if (data.href === this.activeHref) {
            return "";
          }

          return null;
        },
      },
      attached() {
        this.leftNavs = leftNavsData;
      },
      detached() {
        this.leftNavs = [];
      },
    };
  </script>
</template>
