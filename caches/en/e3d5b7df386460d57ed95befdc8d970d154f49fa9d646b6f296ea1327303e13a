The following is a complete example code, including the definition of basic parameters and component templates.